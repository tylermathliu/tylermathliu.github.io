<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">






  
  
  <link rel="stylesheet" media="all" href="/lib/Han/dist/han.min.css?v=3.3">




<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Internet,DNS,WordPress,blog," />










<meta name="description" content="1. Domain name &amp;amp; DNS 1.1 Choosing domain sellers Need to consider:   Pricing, of course Top-level domain names Whether the second-level domain you want is available Method of payment Whet">
<meta name="keywords" content="Internet,DNS,WordPress,blog">
<meta property="og:type" content="article">
<meta property="og:title" content="Building an independent blog (WordPress + VPS)">
<meta property="og:url" content="http://liutianle.top/2018/02/27/Building-an-independent-blog-(WordPress-+-VPS)/index.html">
<meta property="og:site_name" content="Felictopia">
<meta property="og:description" content="1. Domain name &amp;amp; DNS 1.1 Choosing domain sellers Need to consider:   Pricing, of course Top-level domain names Whether the second-level domain you want is available Method of payment Whet">
<meta property="og:locale" content="en">
<meta property="og:image" content="http://www.paincker.com/wp-content/uploads/wpid-be8fefe394c52b5cddefb1b24fc5def4_0509214c-16d9-4b64-87bc-9e42b58ace94.png">
<meta property="og:image" content="http://www.paincker.com/wp-content/uploads/wpid-be8fefe394c52b5cddefb1b24fc5def4_d17856a4-b4cd-4366-b50e-4abad9baffcd.png">
<meta property="og:image" content="http://www.paincker.com/wp-content/uploads/wpid-be8fefe394c52b5cddefb1b24fc5def4_3a5938d1-2965-42b0-8710-aaf39d23fc70.png">
<meta property="og:image" content="http://www.paincker.com/wp-content/uploads/wpid-be8fefe394c52b5cddefb1b24fc5def4_60e63ef6-a1e5-44d1-b1c9-d38bc8208e52.png">
<meta property="og:image" content="http://jwcyber.com/wp-content/uploads/2017/10/1456999197849301.png">
<meta property="og:image" content="http://jwcyber.com/wp-content/uploads/2017/10/1456998176878130.png">
<meta property="og:image" content="http://jwcyber.com/wp-content/uploads/2017/10/1456998215359356.png">
<meta property="og:image" content="http://jwcyber.com/wp-content/uploads/2017/10/1456998243132973.png">
<meta property="og:image" content="http://jwcyber.com/wp-content/uploads/2017/10/1456998291652362.png">
<meta property="og:image" content="http://jwcyber.com/wp-content/uploads/2017/10/1456998340597837.png">
<meta property="og:image" content="http://jwcyber.com/wp-content/uploads/2017/10/1456998386104931.png">
<meta property="og:image" content="http://jwcyber.com/wp-content/uploads/2017/10/1456998468383746.png">
<meta property="og:image" content="http://jwcyber.com/wp-content/uploads/2017/10/1456999357829592.png">
<meta property="og:image" content="http://jwcyber.com/wp-content/uploads/2017/10/1456999382935587.png">
<meta property="og:image" content="http://jwcyber.com/wp-content/uploads/2017/10/1460913548109177.jpg">
<meta property="og:image" content="http://jwcyber.com/wp-content/uploads/2017/10/1456999429630405.png">
<meta property="og:image" content="http://jwcyber.com/wp-content/uploads/2017/10/1456999470114025.png">
<meta property="og:image" content="http://jwcyber.com/wp-content/uploads/2017/10/1456999487346443.png">
<meta property="og:image" content="http://jwcyber.com/wp-content/uploads/2017/10/1456999503100994.png">
<meta property="og:image" content="http://jwcyber.com/wp-content/uploads/2017/10/1456999532700394.png">
<meta property="og:image" content="http://jwcyber.com/wp-content/uploads/2017/10/1456999552136385.png">
<meta property="og:image" content="http://www.paincker.com/wp-content/uploads/wpid-d037d814bdc2341880cd23645b0582c2_4eca28e6003e829f6ee6e513218b4b88.png">
<meta property="og:image" content="http://www.paincker.com/wp-content/uploads/wpid-d037d814bdc2341880cd23645b0582c2_afdc919e68f9126d96f67ad937b1fd4e.png">
<meta property="og:image" content="http://www.paincker.com/wp-content/uploads/wpid-d037d814bdc2341880cd23645b0582c2_c9a9f7c12dc66547a31e0eb18f5ae187.jpg">
<meta property="og:image" content="http://www.paincker.com/wp-content/uploads/wpid-d037d814bdc2341880cd23645b0582c2_42bc0e2bd6f0e6878d0a58e938e116b4.png">
<meta property="og:image" content="http://www.paincker.com/wp-content/uploads/wpid-d037d814bdc2341880cd23645b0582c2_02ac72b642522b7a7247cfba9f6a60e5.png">
<meta property="og:image" content="http://www.paincker.com/wp-content/uploads/wpid-d037d814bdc2341880cd23645b0582c2_303a53cd-929c-468b-aafc-866c79f771a0.png">
<meta property="og:image" content="http://www.paincker.com/wp-content/uploads/wpid-d037d814bdc2341880cd23645b0582c2_ec34ab80-8e58-4102-80f2-35a6d2c0974f.png">
<meta property="og:image" content="http://www.paincker.com/wp-content/uploads/wpid-d037d814bdc2341880cd23645b0582c2_069149eb-9b07-48d9-a032-8ca02c22ce38.png">
<meta property="og:image" content="http://maie.qiniudn.com/table-clound-price.jpg">
<meta property="og:updated_time" content="2018-03-01T05:38:52.681Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Building an independent blog (WordPress + VPS)">
<meta name="twitter:description" content="1. Domain name &amp;amp; DNS 1.1 Choosing domain sellers Need to consider:   Pricing, of course Top-level domain names Whether the second-level domain you want is available Method of payment Whet">
<meta name="twitter:image" content="http://www.paincker.com/wp-content/uploads/wpid-be8fefe394c52b5cddefb1b24fc5def4_0509214c-16d9-4b64-87bc-9e42b58ace94.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://liutianle.top/2018/02/27/Building-an-independent-blog-(WordPress-+-VPS)/"/>





  <title>Building an independent blog (WordPress + VPS) | Felictopia</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Felictopia</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Keep Silence & Do Math</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            Search
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="Searching..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://liutianle.top/2018/02/27/Building-an-independent-blog-(WordPress-+-VPS)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Tyler LIU">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Felictopia">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Building an independent blog (WordPress + VPS)</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-02-27T00:11:55+08:00">
                2018-02-27
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Network/" itemprop="url" rel="index">
                    <span itemprop="name">Network</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/02/27/Building-an-independent-blog-(WordPress-+-VPS)/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2018/02/27/Building-an-independent-blog-(WordPress-+-VPS)/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  7,869
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  29
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        <h2 id="domain-name-dns">1. Domain name &amp; DNS</h2>
<h3 id="choosing-domain-sellers">1.1 Choosing domain sellers</h3>
<p>Need to consider:</p>
<blockquote>
<ul>
<li>Pricing, of course</li>
<li>Top-level domain names</li>
<li>Whether the second-level domain you want is available</li>
<li>Method of payment</li>
<li>Whether you need to 实名认证/备案 and whether 实名认证/备案 is possible and convenient</li>
</ul>
</blockquote>
<p>We list some recommended domain sellers:</p>
<blockquote>
<ul>
<li>万网: 目前最便宜，需要身份证照片实名认证</li>
<li>GoDaddy: relatively inexpensive, can use Alipay, some popular top domains including <em>.top</em> are not available</li>
<li>Name.com: cannot use Alipay, only Paypal</li>
<li>Dynadot: not so cheap</li>
</ul>
</blockquote>
<p>I bought a domain name ending with <em>.xyz</em> on <em>GoDaddy</em> (about 80 RMB per year) and one ending with <em>.top</em> on <em>Dynadot</em> (this one, about 40 RMB per year).</p>
<h3 id="choosing-dns-servers">1.2 Choosing DNS servers</h3>
<p>A <a href="https://www.lifewire.com/what-is-dns-domain-name-system-2625855" target="_blank" rel="noopener">DNS</a> server is a computer server that contains a database of <a href="https://www.lifewire.com/what-is-a-public-ip-address-2625974" target="_blank" rel="noopener">public IP addresses</a>and their associated <a href="https://www.lifewire.com/what-is-a-hostname-2625906" target="_blank" rel="noopener">hostnames</a>, and in most cases, serves to resolve, or translate, those common names to <a href="https://www.lifewire.com/what-is-an-ip-address-2625920" target="_blank" rel="noopener">IP addresses</a> as requested.</p>
<p>We list some recommended servers in mainland China:</p>
<blockquote>
<ul>
<li>DNSPod, Tencent</li>
<li>Aliyun</li>
</ul>
</blockquote>
<p>I chose Aliyun because also want to use a customized e-mail domain name (<em>liutianle.top</em> &amp; <em>love.liutianle.top</em>) and Aliyun provides company e-mail services for free.</p>
<h3 id="configuring-dns-with-vps">1.3 Configuring DNS with VPS</h3>
<p>See http://www.paincker.com/website-primer-4 , I just copied as below. Many thanks.</p>
<h4 id="基础知识">基础知识</h4>
<p>实际访问网站时，确定从哪台服务器获取网页，对于计算机来说是通过IP地址实现的。由于IP地址是数字形式，为了便于人们记忆，所以使用了域名和网址机制。</p>
<p><strong>域名-&gt;IP地址</strong>：在访问网络时，网址会被发送到DNS服务器，然后由DNS服务器返回我们所要访问的服务器IP地址，从而进行访问。这是DNS的工作原理，也是之所以需要设置域名解析的原因。我们要在DNS服务器上设置域名解析，让域名指向服务器空间所在的IP地址。</p>
<p><strong>IP地址-&gt;域名</strong>：一台服务器上可能有多个网站，或者是子网站，他们共用一个IP地址。这时，我们请求的数据被服务器接收到，服务器需要根据判断网址中的域名来判断返回哪个站点的数据。所以我们还要在自己的服务器空间上绑定自己的域名。即域名和服务器空间的绑定关系是双向的。</p>
<h4 id="配置方法">配置方法</h4>
<p>域名解析的配置分为三个部分内容：</p>
<ul>
<li>给域名设置DNS服务器（在域名提供商网站中进行）</li>
<li>在DNS设置域名解析（在DNS服务提供商网站中进行）</li>
<li>在服务器空间设置绑定域名（在服务器空间面板中进行）</li>
</ul>
<p>这三者没有先后关系，但是都设置好才能完成域名解析。</p>
<h4 id="给域名设置dns服务器">给域名设置DNS服务器</h4>
<p>DNS服务常见的都是可以免费使用的，提供DNS服务的如Godaddy，国内的DNSPOD等。如果你是从Godaddy购买的域名，可以直接使用Godaddy的DNS服务，也可以设置成国内的DNSPOD。</p>
<p>下图是Godaddy购买了域名之后登陆账号显示的信息，点击域名产品右侧的Launch即可进入设置界面。</p>
<p><a href="http://www.paincker.com/wp-content/uploads/wpid-be8fefe394c52b5cddefb1b24fc5def4_0509214c-16d9-4b64-87bc-9e42b58ace94.png" target="_blank" rel="noopener"><img src="http://www.paincker.com/wp-content/uploads/wpid-be8fefe394c52b5cddefb1b24fc5def4_0509214c-16d9-4b64-87bc-9e42b58ace94.png" alt="img"></a></p>
<p>设置界面最常用的一项就是下图中的Nameservers，默认的是Godaddy自己的DNS域名服务器网址，图中我修改成了DNSPOD的地址。</p>
<p><a href="http://www.paincker.com/wp-content/uploads/wpid-be8fefe394c52b5cddefb1b24fc5def4_d17856a4-b4cd-4366-b50e-4abad9baffcd.png" target="_blank" rel="noopener"><img src="http://www.paincker.com/wp-content/uploads/wpid-be8fefe394c52b5cddefb1b24fc5def4_d17856a4-b4cd-4366-b50e-4abad9baffcd.png" alt="img"></a></p>
<p>如果使用Godaddy的域名服务器，不需要修改Nameservers，直接点击进入DNS Zone File进行设置。不同的域名服务提供商的设置方法基本相同。</p>
<h4 id="设置dns服务器的域名解析">设置DNS服务器的域名解析</h4>
<p>下面是DNSPOD中域名解析的设置方法。</p>
<p>首先注册账号并登录，进入界面点击添加域名，按照说明输入你注册的域名，如paincker.com，不需要加http和www，然后点击域名进去设置。</p>
<p>选择添加记录，这里有几个选项。</p>
<ul>
<li>记录类型。最常用的记录类型主要是A记录、CNAME记录，记录类型的含义见下图。</li>
<li>主机记录、记录值。设置由 <em>主机记录</em> 指向 <em>记录值</em>。</li>
<li>TTL。TTL是DNS服务器上刷新记录的时间间隔，如果需要频繁更改IP，记录时间可以短一些，否则应该设置长一点，这样一定程度上会加快访问速度。不了解的话，直接用默认值即可。</li>
</ul>
<p><a href="http://www.paincker.com/wp-content/uploads/wpid-be8fefe394c52b5cddefb1b24fc5def4_3a5938d1-2965-42b0-8710-aaf39d23fc70.png" target="_blank" rel="noopener"><img src="http://www.paincker.com/wp-content/uploads/wpid-be8fefe394c52b5cddefb1b24fc5def4_3a5938d1-2965-42b0-8710-aaf39d23fc70.png" alt="img"></a></p>
<p>我们添加两条记录。</p>
<ul>
<li>记录类型：<code>A记录</code>；主机记录：<code>@</code>，表示<code>http://paincker.com</code>；记录值：服务器空间的IP地址（空间提供商会给出这个IP地址）。</li>
<li>记录类型：<code>A记录</code>；主机记录：<code>www</code>，表示网址<code>http://www.paincker.com</code>；记录值：还是上述IP地址。</li>
<li>第2条记录也可以写成：<code>CNAME</code>类型，由<code>www</code>指向<code>@</code>。</li>
</ul>
<p>如果不需要别的子域名、邮件等服务，DNS就已经设置好了。如图，其中有两项是NS类型记录，即域名记录。</p>
<h4 id="服务器空间对域名的绑定">服务器空间对域名的绑定</h4>
<h5 id="url解析与重定向">URL解析与重定向</h5>
<p>假设域名 <code>www.paincker.com</code> 绑定了服务器空间，且网站根目录为空间中的<code>/mysite/</code>目录。</p>
<ul>
<li>默认情况下，输入网址<code>www.paincker.com</code>，打开<code>/mysite/index.html</code>；如果没有，则打开<code>/mysite/index.php</code>文件（对于运行php的服务器来说）。</li>
<li>如果没有<code>index.html</code>和<code>index.php</code>，根据服务器的设置，可能会显示这个文件夹的文件列表。</li>
<li>输入网址<code>www.paincker.com/folder</code>，则默认打开<code>/mysite/folder/</code>文件夹中的相关文件，规则同上。</li>
<li>可以通过设置<code>.htaccess</code>文件改变上述规则，这里不做详细说明。</li>
<li>网站程序可以重定向URL，改变上述规则。</li>
</ul>
<h5 id="确定网站根目录">确定网站根目录</h5>
<p>绑定域名的时候，会让你选择站点根目录，然后绑定一个域名。</p>
<ul>
<li>如果你只有一个网站，可以直接把站点根目录设置为空间根目录，并绑定域名，即<code>paincker.com</code>绑定到<code>/</code>。</li>
<li>如果你觉得这样不方便，有点乱，你也可以设置绑定到一个子目录，例如<code>paincker.com</code>绑定到<code>/my_website/</code>。</li>
<li>即使只有一个网站，也推荐使用后者。因为在空间根目录下可能还有备份等其他文件，使用前者则这些文件暴漏在网站根目录下，则通过网址可以访问，不够安全。</li>
</ul>
<p>下图是我的网站设置。</p>
<p><a href="http://www.paincker.com/wp-content/uploads/wpid-be8fefe394c52b5cddefb1b24fc5def4_60e63ef6-a1e5-44d1-b1c9-d38bc8208e52.png" target="_blank" rel="noopener"><img src="http://www.paincker.com/wp-content/uploads/wpid-be8fefe394c52b5cddefb1b24fc5def4_60e63ef6-a1e5-44d1-b1c9-d38bc8208e52.png" alt="img"></a></p>
<h4 id="测试域名解析是否成功">测试域名解析是否成功</h4>
<p>设置完成后记得保存。如果你很激动的马上访问你的域名，可能会发现提示域名错误等，这是因为这些设置并没有立即刷新，需要等待几分钟直到全球的DNS服务器都进行了刷新才行。</p>
<p>如果你只设置了DNS，把域名指向服务器IP，没有设置空间绑定域名，这时可以用cmd的ping命令ping到服务器IP，但不能访问网页。</p>
<p>一开始我只买了域名还没有主机，看到CNAME可以设置域名指向另一个网址，然后就尝试设置主页指向百度，一直没成功。直到后来才知道，原来主机和域名是需要相互绑定才能访问的。</p>
<p>有些服务器空间会自动放置了一个默认的<code>index.html</code>到网站根目录，用浏览器访问网址就能显示<code>index.html</code>的内容。如果空间里面现在还没有内容，可以自己上传一个<code>index.html</code>文件到站点根目录。</p>
<h4 id="another-tutorial-on-adding-domain-name-to-your-vps">Another tutorial on adding domain name to your VPS</h4>
<p>See <a href="http://banwagong.com/" target="_blank" rel="noopener">banwagong.com</a></p>
<ul>
<li>通过SSH连接到VPS，连接后输入命令 lnmp vhost add 。创建虚拟主机的过程是一个交互式的页面，集中截图到了一起，这里就细说一下。</li>
<li>首先会要求你输入域名，输入好域名回车，会显示是否添加其他域名。我在这里一般是选n，不添加其他域名，然后在通过301重定向不带www的域名到带www的域名。</li>
<li>然后就是网站的路径，默认的是/home/wwwroot/yourdomain 。如果不打算更改的话，直接回车就好，想自定义路径的话直接输入自己想要的路径就好了。</li>
<li>然后就是是否允许Rewrite。这里建议选择y。lnmp自带了几种常用网站的伪静态规则，因为我们要安装的是wordpress，直接输入wordpress就可以了。</li>
<li>再下面一部是是否开启访问日志。搬瓦工小硬盘的套餐的话，不建议开启，毕竟硬盘资源有限。</li>
<li>再接下来就是创建数据库，这里如果要创建的话，会创建成一个用户名和数据库名相同的。</li>
<li>如果选择y的话，会要先验证MySQL的root密码。验证后会让你输入数据库名，回车后会提示你，已经创建了一个和数据库名相同的用户名。然后就是输入数据库的密码。</li>
<li>再回车以后就跳到最后一步，按任意键创建虚拟主机。</li>
</ul>
<p><a href="http://jwcyber.com/wp-content/uploads/2017/10/1456999197849301.png" target="_blank" rel="noopener"><img src="http://jwcyber.com/wp-content/uploads/2017/10/1456999197849301.png" alt="18.png"></a></p>
<p>当出现上图最后的画面时，你的虚拟主机已经创建成功了。</p>
<p>当然，这里的各项配置是可以通过修改配置文件进行更正的。所以没必要太纠结。通过vi修改或者下载到本地修改都可以。虚拟主机配置文件在：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/nginx/conf/vhost/域名.conf</span><br></pre></td></tr></table></figure>
<h2 id="lnmp">2. LNMP</h2>
<p>See http://jwcyber.com/build-site/#21_WordPress_VPS :</p>
<p>putty登录VPS后就可以安装网站的环境了，这里使用LNMP一键安装包，详细查看<a href="http://www.lnmp.org/" target="_blank" rel="noopener">LNMP官网</a>。</p>
<p>LNMP一键安装包是一个用Linux Shell编写的可以为CentOS/RadHat/Fedora、Debian/Ubuntu/Raspbian VPS(VDS)或独立主机安装LNMP(Nginx/MySQL/PHP)生产环境的Shell程序。WordPress就依靠这些环境运行。下面的步骤我直接粘贴<a href="http://lnmp.org/install.html" target="_blank" rel="noopener">LNMP官网的教程</a>。</p>
<p>安装步骤:</p>
<h3 id="installing-screen">2.1 Installing Screen</h3>
<p>使用putty或类似的SSH工具登陆VPS或服务器；登陆后运行：screen -S lnmp</p>
<p>如果提示screen: command not found 命令不存在可以执行：yum install screen 或 apt-get install screen安装，详细的<a href="http://www.vpser.net/manage/run-screen-lnmp.html" target="_blank" rel="noopener">screen教程</a>。</p>
<h3 id="installing-lnmp">2.2 Installing LNMP</h3>
<p>您可以选择使用下载版(推荐国外或者美国VPS使用)或者完整版(推荐国内VPS使用)，两者没什么区别，只是完整版把一些需要的源码文件预先放到安装包里。安装LNMP执行：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -c http://soft.vpser.net/lnmp/lnmp1.2-full.tar.gz &amp;&amp; tar zxf lnmp1.2-full.tar.gz &amp;&amp; cd lnmp1.2-full &amp;&amp; ./install.sh lnmp</span><br></pre></td></tr></table></figure>
<p>按上述命令执行后，会出现如下提示：</p>
<p><a href="http://jwcyber.com/wp-content/uploads/2017/10/1456998176878130.png" target="_blank" rel="noopener"><img src="http://jwcyber.com/wp-content/uploads/2017/10/1456998176878130.png" alt="11.png"></a></p>
<p>需要设置MySQL的root密码（不输入直接回车将会设置为root），输入后回车进入下一步，如下图所示：</p>
<p><a href="http://jwcyber.com/wp-content/uploads/2017/10/1456998215359356.png" target="_blank" rel="noopener"><img src="http://jwcyber.com/wp-content/uploads/2017/10/1456998215359356.png" alt="12.png"></a></p>
<p>这里需要确认是否启用MySQL InnoDB，如果不确定是否启用可以输入 y ，输入 y 表示启用，输入 n 表示不启用。默认为y 启用，输入后回车进入下一步，选择MySQL版本：</p>
<p><a href="http://jwcyber.com/wp-content/uploads/2017/10/1456998243132973.png" target="_blank" rel="noopener"><img src="http://jwcyber.com/wp-content/uploads/2017/10/1456998243132973.png" alt="13.png"></a></p>
<p>输入MySQL或MariaDB版本的序号，回车进入下一步，选择PHP版本：</p>
<p><a href="http://jwcyber.com/wp-content/uploads/2017/10/1456998291652362.png" target="_blank" rel="noopener"><img src="http://jwcyber.com/wp-content/uploads/2017/10/1456998291652362.png" alt="14.png"></a></p>
<p>输入PHP版本的序号，回车进入下一步，选择是否安装内存优化：</p>
<p><a href="http://jwcyber.com/wp-content/uploads/2017/10/1456998340597837.png" target="_blank" rel="noopener"><img src="http://jwcyber.com/wp-content/uploads/2017/10/1456998340597837.png" alt="15.png"></a></p>
<p>可以选择不安装、Jemalloc或TCmalloc，输入对应序号回车。</p>
<p>提示”Press any key to install…or Press Ctrl c to cancel”后，按回车键确认开始安装。LNMP脚本就会自动安装编译Nginx、MySQL、PHP、phpMyAdmin、Zend Optimizer这几个软件。</p>
<p>安装时间可能会几十分钟到几个小时不等，主要是机器的配置网速等原因会造成影响。</p>
<h3 id="finish">2.3 Finish</h3>
<p>如果显示Nginx: OK，MySQL: OK，PHP: OK</p>
<p><a href="http://jwcyber.com/wp-content/uploads/2017/10/1456998386104931.png" target="_blank" rel="noopener"><img src="http://jwcyber.com/wp-content/uploads/2017/10/1456998386104931.png" alt="16.png"></a></p>
<p>并且Nginx、MySQL、PHP都是running，80和3306端口都存在，并Install lnmp V1.2 completed! enjoy it.的话，说明已经安装成功。</p>
<p>安装时间比较长，我花了刚好30分钟。最后的界面可能和上面教程不同，只要出现enjoy it就行。下面是我安装完成的截图：</p>
<p><a href="http://jwcyber.com/wp-content/uploads/2017/10/1456998468383746.png" target="_blank" rel="noopener"><img src="http://jwcyber.com/wp-content/uploads/2017/10/1456998468383746.png" alt="17.png"></a></p>
<h2 id="installing-wordpress-on-vps">3. Installing WordPress on VPS</h2>
<p>通过上面的步骤已经安装好了VPS搭建网站所需的环境并创建好了主机，接下来就是上传网站文件完成网站的安装。</p>
<h3 id="uploading-wordpress-installation-contents">3.1 Uploading WordPress installation contents</h3>
<p>我们需要一款ftp软件，这里使用的是<a href="https://filezilla-project.org/" target="_blank" rel="noopener">Filezilla</a>。之前的环境搭建中，并没有安装ftp服务，所以使用sftp上传网站文件。</p>
<p>在Filezilla主页中点击文件→站点管理器，具体设置如下图，注意端口要填正确，协议选择sftp。登录类型选择正常就好，用户名密码填好点击连接即可。</p>
<p><a href="http://jwcyber.com/wp-content/uploads/2017/10/1456999357829592.png" target="_blank" rel="noopener"><img src="http://jwcyber.com/wp-content/uploads/2017/10/1456999357829592.png" alt="19.png"></a></p>
<p>连接之后建议先进入/home/wwwroot/default 删除其中的如下图所示选中的文件，同时修改phpmyadmin的目录名，改为不容易猜到的。</p>
<p>很多人问这一步的原因，根据评论中<a href="http://www.seoimo.com/" target="_blank" rel="noopener">SEOIMO</a>所说：</p>
<blockquote>
<p>default这个文件夹是系统默认的，里面是一些安装的信息，比如数据库和探针地址，为了安全起见，应该将里面文件改名或重建。而域名是建立在/home/wwwroot/文件夹下的，和default同层的。 除了数据库外，不用太在意default里面的内容，因为建站并不在此文件夹内。</p>
</blockquote>
<p><a href="http://jwcyber.com/wp-content/uploads/2017/10/1456999382935587.png" target="_blank" rel="noopener"><img src="http://jwcyber.com/wp-content/uploads/2017/10/1456999382935587.png" alt="20.png"></a></p>
<p>然后进入到网站的安装目录，即上面的www.jwcyber.com文件夹，把网站的源文件上传到根目录里就可以了。当然，先得先去<a href="https://cn.wordpress.org/" target="_blank" rel="noopener">中文官网</a>把wordpress的安装文件下载下来。</p>
<p>解压后用Filezilla直接上传WP的网站文件，由于全是小文件，这将是一个非常漫长的过程。文件上传完成后的文件结构如下图所示（WordPress的网站文件直接位于www.jwcyber.com文件夹下）：</p>
<p><a href="http://jwcyber.com/wp-content/uploads/2017/10/1460913548109177.jpg" target="_blank" rel="noopener"><img src="http://jwcyber.com/wp-content/uploads/2017/10/1460913548109177.jpg" alt="QQ截图20160418011340.jpg"></a></p>
<p>如果觉得上传太慢，可以先将网站文件压缩成zip压缩包，上传到VPS后再解压。打包的时候直接多选文件打包成1.zip，方便解压。</p>
<p>压缩包上传完成后，通过SSH连接到VPS，进入网站的安装目录，命令为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /home/wwwroot/www.jwcyber.com (换成你自己的安装目录即可，注意cd后面有空格）</span><br></pre></td></tr></table></figure>
<p>进入后执行命令 unzip 1.zip 回车即可。</p>
<p><a href="http://jwcyber.com/wp-content/uploads/2017/10/1456999429630405.png" target="_blank" rel="noopener"><img src="http://jwcyber.com/wp-content/uploads/2017/10/1456999429630405.png" alt="21.png"></a></p>
<p>解压后要使WordPress的网站文件直接位于www.jwcyber.com文件夹下，和上面的截图一样，否则使用Filezilla移动一下文件。出现403错误的基本都是这个问题，我一开始也犯过，评论中看到很多人也犯过这个错误。</p>
<p>然后等待域名的解析生效以后，就可以安装网站了。</p>
<h3 id="logging-in-on-wordpress">3.2 Logging in on WordPress</h3>
<p>输入网址www.jwcyber.com，如果出现的是LNMP界面，则在VPS的管理界面里面重启一下VPS；如果是下面的WordPress的界面，证明前面的操作都没有问题，可以进行WordPress的配置了。按照下面的截图进行配置就行了。</p>
<p><a href="http://jwcyber.com/wp-content/uploads/2017/10/1456999470114025.png" target="_blank" rel="noopener"><img src="http://jwcyber.com/wp-content/uploads/2017/10/1456999470114025.png" alt="1456999470114025.png"></a></p>
<p><a href="http://jwcyber.com/wp-content/uploads/2017/10/1456999487346443.png" target="_blank" rel="noopener"><img src="http://jwcyber.com/wp-content/uploads/2017/10/1456999487346443.png" alt="1456999487346443.png"></a></p>
<p><a href="http://jwcyber.com/wp-content/uploads/2017/10/1456999503100994.png" target="_blank" rel="noopener"><img src="http://jwcyber.com/wp-content/uploads/2017/10/1456999503100994.png" alt="1456999503100994.png"></a></p>
<p><a href="http://jwcyber.com/wp-content/uploads/2017/10/1456999532700394.png" target="_blank" rel="noopener"><img src="http://jwcyber.com/wp-content/uploads/2017/10/1456999532700394.png" alt="1456999532700394.png"></a></p>
<p>欢迎使用WordPress！</p>
<p>到这里，用VPS LNMP WordPress搭建个人网站就基本完成了。</p>
<p><a href="http://jwcyber.com/wp-content/uploads/2017/10/1456999552136385.png" target="_blank" rel="noopener"><img src="http://jwcyber.com/wp-content/uploads/2017/10/1456999552136385.png" alt="27.png"></a></p>
<h3 id="problems-met-with-wordpress">3.3 Problems met with WordPress</h3>
<blockquote>
<p><a href="http://jwcyber.com/tips-for-wp/#1_FTP" target="_blank" rel="noopener">1 提示需要输入FTP信息</a></p>
<p><a href="http://jwcyber.com/tips-for-wp/#2_301jwcybercomwwwjwcybercom" target="_blank" rel="noopener">2 301重定向jwcyber.com到www.jwcyber.com</a></p>
<p><a href="http://jwcyber.com/tips-for-wp/#3_WordPress" target="_blank" rel="noopener">3 WordPress只显示一个主题</a></p>
<p><a href="http://jwcyber.com/tips-for-wp/#4" target="_blank" rel="noopener">4 自带编辑器不够用</a></p>
<p><a href="http://jwcyber.com/tips-for-wp/#5" target="_blank" rel="noopener">5 为文章添加目录</a></p>
<p><a href="http://jwcyber.com/tips-for-wp/#6" target="_blank" rel="noopener">6 网站导航菜单</a></p>
<p><a href="http://jwcyber.com/tips-for-wp/#7nbspGravatar" target="_blank" rel="noopener">7 Gravatar头像不能加载或者加载缓慢</a></p>
<p><a href="http://jwcyber.com/tips-for-wp/#8" target="_blank" rel="noopener">8 使用百度统计分析网站</a></p>
<p><a href="http://jwcyber.com/tips-for-wp/#9" target="_blank" rel="noopener">9 添加站点地图</a></p>
<p><a href="http://jwcyber.com/tips-for-wp/#10" target="_blank" rel="noopener">10 文章内容分页</a></p>
</blockquote>
<h2 id="an-overview-of-wordpress">4. An overview of WordPress</h2>
<p>See http://www.paincker.com/website-primer-6</p>
<h3 id="features-of-wordpress">4.1 Features of WordPress</h3>
<p>WordPress是一个被广泛使用的网站框架，主要用于博客类网站，但也被一些站点做成资讯类网站、购物网站等。</p>
<p>类似WordPress，也有一些其他的网站框架，比如我们用很多论坛时，就发现论坛标题末尾有一句Powered by Discuz!。Discuz!也是一个使用很多的网站框架，一般用于论坛网站。</p>
<p>我们可以感受到，使用了WordPress这一框架，很轻松的就搭建了一个功能完整的个人博客网站，完全不涉及任何代码。这一篇我们一起熟悉WordPress的基本应用。你会发现，WordPress用起来就和装扮QQ空间一样简答方便。</p>
<p>由于我们的WordPress是安装在我们租用的远程服务器上的，在对网站进行管理的时候，一切操作都通过网络发送到服务器端处理，处理完在通过网络发送到我们的电脑上，整个过程都是在浏览器中进行，和QQ空间装扮一样。通过网络传输自然有延迟，尤其是国外的服务器，并且我们的服务器流量也有限。</p>
<p>更好的办法是，让WordPress运行在自己的电脑上，并进行配置，配置好了，再转移到服务器上。</p>
<h3 id="installing-local-wordpress">4.2 Installing local WordPress</h3>
<p>让本地计算机支持WordPress，需要安装PHP、MySQL等环境，但是这里已经有软件为我们全部做好了，例如USB WebServer。</p>
<p>下载解压运行USB WebServer（不用安装，放到U盘也能用），当Apache、MySQL环境启动后，默认情况下，软件的root子目录就成为网站 <code>http://localhost</code> 的根目录，当然你也可以在设置中修改。如果Apache启动不了，试试在设置里面改一下端口，我自己电脑上就是改了端口才能启动的。</p>
<p>把WordPress文件解压到root子目录中，浏览器访问 <code>http://localhost</code> 就可以打开本地的WordPress页面了。当然还需要进行数据库的配置。</p>
<p>如果你只是想学习WordPress相关知识而不打算实际建网站，也可以用这种方式来学习。</p>
<blockquote>
<p>参考《USBWebserver：快速搭建本地PHP环境的好工具》 <a href="http://www.paincker.com/usbwebserver" class="uri" target="_blank" rel="noopener">http://www.paincker.com/usbwebserver</a></p>
</blockquote>
<h3 id="themes">4.3 Themes</h3>
<p>WordPress里面有很多主题和插件供选择。如果有兴趣，你也可以自己做插件（当然这就要写代码了），或者修改别人的主题和插件，做的好的也可以共享到网上。当然<strong>使用别人的劳动成果时，要注意是否侵权</strong>。比如有些主题的作者会声明，主题可免费使用和修改，包括商业用途，但需要注明主题的原作者。</p>
<p>我们用管理员身份登录进入安装在本地或远程服务器的WordPress后台。如果你找不到登录界面，可以在域名后面加一个wp-login.php，这是默认的登录地址。</p>
<div class="figure">
<img src="http://www.paincker.com/wp-content/uploads/wpid-d037d814bdc2341880cd23645b0582c2_4eca28e6003e829f6ee6e513218b4b88.png" alt="快照1.png">
<p class="caption">快照1.png</p>
</div>
<p>在仪表盘中，我们选择外观-主题菜单，就会打开主题界面，显示所有已经安装的主题。</p>
<div class="figure">
<img src="http://www.paincker.com/wp-content/uploads/wpid-d037d814bdc2341880cd23645b0582c2_afdc919e68f9126d96f67ad937b1fd4e.png" alt="快照2.png">
<p class="caption">快照2.png</p>
</div>
<p>打开下面的界面，就可以切换已经安装的主题了。主题更换后，整个网站的界面风格都会发生改变，就像QQ空间中的皮肤一样。</p>
<p><a href="http://www.paincker.com/wp-content/uploads/wpid-d037d814bdc2341880cd23645b0582c2_c9a9f7c12dc66547a31e0eb18f5ae187.jpg" target="_blank" rel="noopener"><img src="http://www.paincker.com/wp-content/uploads/wpid-d037d814bdc2341880cd23645b0582c2_c9a9f7c12dc66547a31e0eb18f5ae187.jpg" alt="快照3.jpg"></a></p>
<p>例如我安装并启用Twenty Thirteen主题，效果如下：</p>
<p><a href="http://www.paincker.com/wp-content/uploads/wpid-d037d814bdc2341880cd23645b0582c2_42bc0e2bd6f0e6878d0a58e938e116b4.png" target="_blank" rel="noopener"><img src="http://www.paincker.com/wp-content/uploads/wpid-d037d814bdc2341880cd23645b0582c2_42bc0e2bd6f0e6878d0a58e938e116b4.png" alt="快照5_2.png"></a></p>
<p>如果你需要安装主题，有几种方法：</p>
<ol style="list-style-type: decimal">
<li>通过在线的主题商城。点击添加按钮，打开在线主题商城，即可安装。</li>
<li>通过网页上传主题包。你在别的地方可以下载到做好的WordPress主题或者自己制作的主题，一般是zip压缩包。在主题商城的添加主题页面，点击上传主题按钮，上传压缩包即可。</li>
<li>还可以直接复制主题文件到WordPress中的-content，注意这里需要解压后的文件，不是压缩包。</li>
</ol>
<h3 id="plugins">4.4 Plugins</h3>
<p>WordPress还能安装很多插件。有点像QQ空间里面的各种挂件之类的东西，但是比那些更加强大。</p>
<p>比如你可以安装文章浏览量统计插件WP-PostViews，然后可以查看到你的每一篇文章有多少人阅读过（当然初次建站安装这个插件后，发现自己写的东西访问量很低，相当心寒……劝你还是别安装了o(╯□╰)o）；安装WP Smush.it软件压缩网站中的图片，这样打开网页会更快，也节约了你的服务器流量消耗……</p>
<p>插件的安装在插件菜单中。同样你也有三种方式来安装，在线安装，上传压缩包，和直接复制文件（插件在wp-content）。如果你有一些想要实现的功能但是不知道用什么插件，可以在网上找找。</p>
<p>插件安装上之后，你可以根据需要启用或禁用插件。安装太多插件可能会减慢网页访问速度，这点要注意。插件安装并启用后，一般会在设置菜单里添加一个插件的设置页面，有的插件还会在主题菜单等位置添加一些选项。</p>
<h3 id="tools">4.5 Tools</h3>
<p>WordPress里面还有小工具，小工具通常是显示在网页侧边栏的，例如最新文章、分类目录、搜索等，具体小工具的位置是根据主题设置好的，也有的主题不支持小工具，或者是在手机访问时不支持小工具。</p>
<p>如果你的主题支持小工具，在外观-小工具菜单就能进行设置了。如果你安装了一些插件，例如前面说到WP-PostViews，他也会生成一个小工具供你使用。还有些主题也带有很多小工具。</p>
<p><a href="http://www.paincker.com/wp-content/uploads/wpid-d037d814bdc2341880cd23645b0582c2_02ac72b642522b7a7247cfba9f6a60e5.png" target="_blank" rel="noopener"><img src="http://www.paincker.com/wp-content/uploads/wpid-d037d814bdc2341880cd23645b0582c2_02ac72b642522b7a7247cfba9f6a60e5.png" alt="快照4.png"></a></p>
<h3 id="posts-categories-tags-comments-users">4.6 Posts, categories, tags, comments &amp; users</h3>
<p>因为WordPress是博客网站的框架，自然少不了文章。你可以在文章菜单中管理、编辑、新建文章，并为文章选择分类、标签。如果你感觉WordPress自带的文章编辑器不好用，也可以安装一些插件对自带编辑器进行替换，例如CKEditor。</p>
<p>文章发表后，别人看到了可以发表评论。在设置菜单中，你可以设置大家是直接匿名进行评论，还是必须填写昵称和邮件进行评论，或者在你的网站注册了才能发表评论。你的账号是管理员账号，可以在后台管理网站，而新注册用户的权限你可以进行设置，默认是订阅者。你也可以禁止用户注册，或者对某些文章设置禁止评论。</p>
<p>WordPress还支持离线发布文章的功能。例如我一直用为知笔记编辑文章，然后很轻松就能上传图片，同时发表文章到我的网站。</p>
<blockquote>
<p>参考《为知笔记离线博客发布功能》 <a href="http://www.paincker.com/wiz-blog" class="uri" target="_blank" rel="noopener">http://www.paincker.com/wiz-blog</a></p>
</blockquote>
<p><a href="http://www.paincker.com/wp-content/uploads/wpid-d037d814bdc2341880cd23645b0582c2_303a53cd-929c-468b-aafc-866c79f771a0.png" target="_blank" rel="noopener"><img src="http://www.paincker.com/wp-content/uploads/wpid-d037d814bdc2341880cd23645b0582c2_303a53cd-929c-468b-aafc-866c79f771a0.png" alt="img"></a></p>
<h3 id="pages">4.7 Pages</h3>
<p>页面的编辑和文章相似，区别是，页面通常用户编写一些很少修改的信息，比如你可以编写一个留言板页面，对自己网站进行介绍，大家可以在留言板发言（也就是评论）。而留言板是一个固定页面，不会像文章一样，随着时间推移，慢慢就排到很后面的位置了。</p>
<h3 id="menus">4.8 Menus</h3>
<p>WordPress还有菜单功能。通常大部分主题都支持菜单功能，例如显示在网页顶部的那部分就是菜单。</p>
<p><a href="http://www.paincker.com/wp-content/uploads/wpid-d037d814bdc2341880cd23645b0582c2_ec34ab80-8e58-4102-80f2-35a6d2c0974f.png" target="_blank" rel="noopener"><img src="http://www.paincker.com/wp-content/uploads/wpid-d037d814bdc2341880cd23645b0582c2_ec34ab80-8e58-4102-80f2-35a6d2c0974f.png" alt="img"></a></p>
<p>你可以设置首页、关于和留言板的页面在菜单上，然后把文章分类也放在菜单里。支持多级菜单，直接在页面中拖动位置就能进行设置。</p>
<div class="figure">
<img src="http://www.paincker.com/wp-content/uploads/wpid-d037d814bdc2341880cd23645b0582c2_069149eb-9b07-48d9-a032-8ca02c22ce38.png" alt="img">
<p class="caption">img</p>
</div>
<h3 id="media">4.9 Media</h3>
<p>WordPress的媒体库相当于QQ空间相册，不过它不仅支持照片，还可以上传视频、音频、文档等，大家应该都比较熟悉，不再进行详细介绍。</p>
<p>WordPress后台的菜单选项基本上就是这些，如果你安装了一些主题、插件，可能会在菜单中添加一些选项，例如有的主题就有很多配置选项。不做一一介绍。</p>
<p>你只要花上一些时间和耐心就能像装扮QQ空间一样，设置好自己的网站。</p>
<h3 id="migration">4.10 Migration</h3>
<p>在本地设置好主题等配置后，需要上传到服务器端。WordPress的数据分两个地方保存，一个是WordPress文件夹，另一个是数据库。由于不同的插件数据保存的位置格式等可能不一样，<strong>如果直接把文件覆盖到服务器，并把本地数据库原封不动导进在线服务器的数据库，可能会出现一些问题</strong>。</p>
<p>后面还会讲到服务器的更换，域名的更换等，数据迁移都是必要的。网上有很多参考资料，但是实际使用时我还是遇到了一些问题，解决起来也有点麻烦，对于初学者不好理解。同时考虑到本篇主要讲基本配置，数据迁移就先不做介绍了。</p>
<p>所以本地数据迁移到服务器，最保险的方法是：把安装的主题和所有插件打包起来上传到服务器（也就是themes和plugins文件夹中的文件，这两个文件夹中不会用来保存配置文件）；然后在服务器端，对照本地的设置再配置一遍。</p>
<p>值得注意的是，如果你在本地WordPress中编辑页面和文章，数据会被保存在数据库中，需要通过数据库才能迁移。如果文中还有图片，图片的引用地址是 <code>http://localhost</code> ，不能直接迁移到服务器，还需要替换数据库中数据的网址字段，本篇暂不介绍。所以建议直接在服务器端进行编辑。</p>
<h2 id="working-with-wordpress">5. Working with WordPress</h2>
<h3 id="several-recommended-themes">5.1 Several recommended themes</h3>
<blockquote>
<ul>
<li><p><a href="http://www.xgllseo.com/?p=1333" target="_blank" rel="noopener">little-cheese</a></p></li>
<li><p>OceanWP</p></li>
</ul>
<p>Here is the tutorial: https://www.youtube.com/watch?v=2cbvZf1jIJM&amp;t=2876s</p>
<p>Visit Tyler's website for templates and more: <a href="https://www.youtube.com/redirect?v=2cbvZf1jIJM&amp;event=video_description&amp;redir_token=fVZ4iwMZ_VTfcTtB3f8WGkZ0dN58MTUxOTc0Njk5NUAxNTE5NjYwNTk1&amp;q=http%3A%2F%2Fwww.tyler.com" target="_blank" rel="noopener">http://www.tyler.com</a></p>
<p>Visit Enmanuel Website For Help: <a href="https://www.youtube.com/redirect?v=2cbvZf1jIJM&amp;event=video_description&amp;redir_token=fVZ4iwMZ_VTfcTtB3f8WGkZ0dN58MTUxOTc0Njk5NUAxNTE5NjYwNTk1&amp;q=http%3A%2F%2Ficreateyoursite.com%2F" target="_blank" rel="noopener">http://icreateyoursite.com/</a></p>
<ul>
<li>themify-ultra</li>
</ul>
<p>Here is the tutorial: https://www.youtube.com/watch?v=5JWgv0nTOEg&amp;t=4260s</p>
</blockquote>
<h3 id="picture-bed">5.2 Picture bed</h3>
<p>See here: http://maie.name/553.html</p>
<h4 id="使用wordpress的不安">使用Wordpress的不安</h4>
<p>WordPress 的一些功能可能比较合大多数用户，但对于我来说，还是造成了不安。比如：</p>
<ol style="list-style-type: decimal">
<li><strong>上传图片占用ID：</strong>上传图片会占用 post id，而碰巧我又是使用 post id 作为固定链接；</li>
<li><strong>自动保存草稿和修订记录占用ID：</strong>wordpress一个很“贴心”的的功能就是自动保存文章草稿和修订记录。这些功能无法在设置中关闭，且于代码深度整合，对于我们这种不懂代码的很不易修改，而这些记录会占用很多ID。最主要是wordpress官方似乎会将自动保存和修订记录功能更深入化的迹象。</li>
<li><strong>更换固定链接的代价</strong>：如果将 post id 更换为 post name 别名，则会影响搜索引擎搜录，且内部的链接好多都要重新设置。更换固定链接的代价与单纯的ID洁癖相比是否值得？！</li>
</ol>
<p>对于自动保存文章草稿和生成多个版本的修订记录我个人觉得是个很鸡肋的功能。先说自动保存，你要自动保存就保存到当前ID的 post 中吧，非要另开一个ID来保存；修订记录也是，你开一贴编辑，四分之一柱香不到的时间就保存了若干修订历史记录，这得占用多少资源啊，也不利于节能环保什么的。好吧，你说有人需要，那么你就加个设置选项开关啊，真是不懂！</p>
<h4 id="图片上传到wordpress好处">图片上传到<a href="http://maie.name/tag/wordpress" target="_blank" rel="noopener">WordPress</a>好处</h4>
<p>WordPress中上传的图片不仅仅是附件，而是一种文章类型。如果使用 WordPress 上传一张图片, 数据库中会生成一条类型为 attachment 的 post 数据。因些图片的编辑修改删除都很方便，便于管理，网站能访问图片就能访问，不会受到图库的影响。</p>
<p>很多网友分析 wordpress 内建图库, 如果图片相关性和文字描述做得足够好, 图片很容易被搜索到, 而且图片搜索的转化率很高，所以使用 WordPress 内建图库作为文章的大图页面, 也是 WordPress SEO 中重要的一环。但使用 wordpress 的内建图库时须注意：</p>
<blockquote>
<ul>
<li>填写清晰, 带关键字的图片 alt 和 title；</li>
<li>将图片放在文章中相关性高的段落前后；</li>
<li>如果使用多语言, 在不同的语言版本使用不一样的图片描述 (否则搜索引擎无法定位主页面)；</li>
<li>避免使用超大的图片, 以影响页面加载, 图片备份和网站流量。</li>
</ul>
<p>（via MG12）</p>
</blockquote>
<h4 id="图片上传到wordpress限制">图片上传到WordPress限制</h4>
<p>图片上传到 wordpress 也有一些不足或者说额外的限制。我现在使用的是国内美橙互联的最便宜的linux虚拟主机，每月流量15G/月，按近三个月来看，因访问量较低，每个月网站浏览大约是1.6Gb左右。我的网站图片比较多，即使处理到分辨率很小（比如最长边设置为500），平均每张图片也需要100KB吧。所以如果图片上传到 wordpress 的媒体图库，流量方面是个需要考虑的问题。 <embed src="http://maie.qiniudn.com/site-traffic-1.jpg!m"> <em>（maie.name网站流量示意图）</em></p>
<p>另外一个需要考虑的问题就是上面提到的占用ID的问题。不知道wordpress是基于什么考虑，上传图片占ID这事儿太让人揪心了。</p>
<p>此外，Maie 还觉得 post name 很难做到唯一性，而且标题要翻译成正确的英文也不是太容易。正如叫“张三”的人多得，难道我写之前还要先去查一下有木有叫张三的么？很容易搞错，也不易区别。</p>
<h4 id="使用图床的好处">使用图床的好处</h4>
<p>图床就是使用第三方的服务托管图片，在自己网站上通过HTTP外链引用这些图片。为什么使用图床？原因不外乎以下几种：</p>
<ul>
<li><strong>流量不足。</strong>很多人像我一样购买虚拟主机写博客，空间通常只有200MB，每个月只有 15G 到 50G 限制，不得不使用图床。</li>
<li><strong>图片便于管理。</strong>一般云图床有CDN加速；有WEB或FTP方式上传管理；有些还有评论、分类、分享等完善的功能；最主要是空间和流量可以按需调整。</li>
</ul>
<p>使用图床的好处主要就是弥补虚拟主机的不足。如果直接使用 WordPress 的 Media 功能, 那国内虚拟主机支付的费用就是个问题。 如果我不用为流量操心, 还会不会使用图床？！</p>
<h4 id="试用过的云图床比较">试用过的云图床比较</h4>
<p>又拍云、七牛云存储、百度BCS云存储和网易云相册以上这些图床的简单对比见下表所示： <img src="http://maie.qiniudn.com/table-clound-price.jpg" alt="云图床超级比一比"> <em>（云图床超级比一比）</em></p>
<p>http://www.zmonster.me/2013/12/06/image-host-service.html</p>
<p>Well, I actually chose tencent cloud COS because it provides 50G for free.</p>
<h3 id="markdown-and-latex">5.3 Markdown and LaTeX</h3>
<p>There are many Markdown plugins for WordPress. As for LaTeX, see here: https://www.codelast.com/%E5%8E%9F%E5%88%9B%E7%94%A8latex-for-wordpress%E6%8F%92%E4%BB%B6%E5%9C%A8wordpress%E4%B8%AD%E5%86%99%E6%95%B0%E5%AD%A6%E5%85%AC%E5%BC%8F/</p>
<h3 id="setting-up-wordpress-elsewhere">5.4 Setting up WordPress elsewhere</h3>
<p>WordPress can also be set up in Dreamweaver/ on a local machine.</p>
<p>See here: https://www.youtube.com/watch?v=T_y0Gmsfqro</p>
<h3 id="others">5.5 Others</h3>
<p>See here: http://www.paincker.com/website-primer-7</p>
<h2 id="summary">6. Summary</h2>
<p>I don't want to write a summary.</p>
<p>Just enjoy my WordPress blog!!!</p>
<h2 id="references">References</h2>
<p>http://www.paincker.com/website-primer-4</p>
<p>http://www.paincker.com/website-primer-6</p>
<p>http://jwcyber.com/build-site/#21_WordPress_VPS</p>
<p>http://maie.name/553.html</p>
<h2 id="see-also">See also</h2>
<p>http://aword.net/my-wordpress-track/</p>
<p>https://www.seoimo.com/wordpress-vps/#wordpress-migrate</p>
<p>https://www.zhihu.com/question/19594033</p>
<p>https://www.zhihu.com/question/20463581</p>
<p>https://www.banwagongzw.com/17.html</p>
<p>https://www.ludou.org/create-wordpress-themes-template-hierarchy.html</p>
<p>http://www.shichangbu.com/article-3346-1.html</p>
<p>http://www.paincker.com/website-primer-7</p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Internet/" rel="tag"># Internet</a>
          
            <a href="/tags/DNS/" rel="tag"># DNS</a>
          
            <a href="/tags/WordPress/" rel="tag"># WordPress</a>
          
            <a href="/tags/blog/" rel="tag"># blog</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/02/26/Building-a-virtual-private-network-on-a-VPS/" rel="next" title="Building a virtual private network on a VPS">
                <i class="fa fa-chevron-left"></i> Building a virtual private network on a VPS
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/02/28/Building-an-independent-blog-2-Hexo-Github/" rel="prev" title="Building an independent blog 2 (Hexo + Github)">
                Building an independent blog 2 (Hexo + Github) <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
    </div>
  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Tyler LIU</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">9</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">3</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">19</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="mailto:lelemath@liutianle.top" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://www.instagram.com/leleleleliew/" target="_blank" title="Instagram">
                      
                        <i class="fa fa-fw fa-instagram"></i>Instagram</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#domain-name-dns"><span class="nav-text">1. Domain name &amp; DNS</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#choosing-domain-sellers"><span class="nav-text">1.1 Choosing domain sellers</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#choosing-dns-servers"><span class="nav-text">1.2 Choosing DNS servers</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#configuring-dns-with-vps"><span class="nav-text">1.3 Configuring DNS with VPS</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#基础知识"><span class="nav-text">基础知识</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#配置方法"><span class="nav-text">配置方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#给域名设置dns服务器"><span class="nav-text">给域名设置DNS服务器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#设置dns服务器的域名解析"><span class="nav-text">设置DNS服务器的域名解析</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#服务器空间对域名的绑定"><span class="nav-text">服务器空间对域名的绑定</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#url解析与重定向"><span class="nav-text">URL解析与重定向</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#确定网站根目录"><span class="nav-text">确定网站根目录</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#测试域名解析是否成功"><span class="nav-text">测试域名解析是否成功</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#another-tutorial-on-adding-domain-name-to-your-vps"><span class="nav-text">Another tutorial on adding domain name to your VPS</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#lnmp"><span class="nav-text">2. LNMP</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#installing-screen"><span class="nav-text">2.1 Installing Screen</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#installing-lnmp"><span class="nav-text">2.2 Installing LNMP</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#finish"><span class="nav-text">2.3 Finish</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#installing-wordpress-on-vps"><span class="nav-text">3. Installing WordPress on VPS</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#uploading-wordpress-installation-contents"><span class="nav-text">3.1 Uploading WordPress installation contents</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#logging-in-on-wordpress"><span class="nav-text">3.2 Logging in on WordPress</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#problems-met-with-wordpress"><span class="nav-text">3.3 Problems met with WordPress</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#an-overview-of-wordpress"><span class="nav-text">4. An overview of WordPress</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#features-of-wordpress"><span class="nav-text">4.1 Features of WordPress</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#installing-local-wordpress"><span class="nav-text">4.2 Installing local WordPress</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#themes"><span class="nav-text">4.3 Themes</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#plugins"><span class="nav-text">4.4 Plugins</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#tools"><span class="nav-text">4.5 Tools</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#posts-categories-tags-comments-users"><span class="nav-text">4.6 Posts, categories, tags, comments &amp; users</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#pages"><span class="nav-text">4.7 Pages</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#menus"><span class="nav-text">4.8 Menus</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#media"><span class="nav-text">4.9 Media</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#migration"><span class="nav-text">4.10 Migration</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#working-with-wordpress"><span class="nav-text">5. Working with WordPress</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#several-recommended-themes"><span class="nav-text">5.1 Several recommended themes</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#picture-bed"><span class="nav-text">5.2 Picture bed</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#使用wordpress的不安"><span class="nav-text">使用Wordpress的不安</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#图片上传到wordpress好处"><span class="nav-text">图片上传到WordPress好处</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#图片上传到wordpress限制"><span class="nav-text">图片上传到WordPress限制</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#使用图床的好处"><span class="nav-text">使用图床的好处</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#试用过的云图床比较"><span class="nav-text">试用过的云图床比较</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#markdown-and-latex"><span class="nav-text">5.3 Markdown and LaTeX</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#setting-up-wordpress-elsewhere"><span class="nav-text">5.4 Setting up WordPress elsewhere</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#others"><span class="nav-text">5.5 Others</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#summary"><span class="nav-text">6. Summary</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#references"><span class="nav-text">References</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#see-also"><span class="nav-text">See also</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Tyler LIU</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>








        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  










  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
  
  <script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item=>{
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: false,
        notify: false,
        appId: 'juIVbuI0IdTiRuHRwHKikqB1-gzGzoHsz',
        appKey: '5NuaxNUMHNJegGsdvWHiOa63',
        placeholder: 'Just go go',
        avatar:'mm',
        guest_info:guest,
        pageSize:'10' || 10,
    });
  </script>



  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  
  


  

  

</body>
</html>
